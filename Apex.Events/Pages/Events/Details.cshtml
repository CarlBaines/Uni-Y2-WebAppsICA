@page
@model Apex.Events.Pages.Events.DetailsModel

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Event</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Event.EventName)
            <br />
            @Html.DisplayNameFor(e => e.Event.EventType)
            <br />
            @Html.DisplayNameFor(d => d.Event.EventDate)
            <br />
            @Html.DisplayNameFor(v => v.Event.VenueCode)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Event.EventName)
            <br />
            @Html.DisplayFor(et => et.Event.EventType)
            <br />
            @Html.DisplayFor(d => d.Event.EventDate)
            <br />
            @Html.DisplayFor(v => v.Event.VenueCode)
        </dd>
    </dl>

    <h4>Booked Guests</h4>
    @if (Model.Event.GuestBookings is { Count: > 0 })
    {
        <ul>
            @foreach(var booking in Model.Event.GuestBookings)
            {
                var guest = booking.Guest;
                <li>
                    @if (guest is not null)
                    {
                        @($"{guest.FirstName} {guest.LastName}".Trim())
                    }
                    else
                    {
                        @:"Unknown Guest"
                    }
                </li>
            }       
        </ul>
        <h5>Total Count of Guests</h5>
		<p>@Model.Event.GuestBookings.Count</p>
    }
    else
    {
        <p>No guests have booked for this event yet.</p>
    }

    <h4>Food Bookings</h4>
    @if (Model.FoodBookings is { Count: > 0 })
    {
        <ul>
            @foreach(var fb in Model.FoodBookings)
            {
                <li>
					Booking: @fb.FoodBookingId -
                    Client: @fb.ClientReferenceId,
                    Menu: @fb.MenuId,
                    Guests: @fb.NumberOfGuests
                </li>
            }
        </ul>
    }
    else
    {
        <p>No food bookings have been made for this event.</p>
    }
</div>
<div>
    <a asp-page="./Edit" asp-route-id="@Model.Event.EventId">Edit</a> |
    <a asp-page="./Index">Back to List</a>
</div>
